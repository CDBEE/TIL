# Thymeleaf

Date: 2021년 11월 22일

# 타임리프

---

## 타임리프란?

- 서버 사이드 HTML 렌더링(SSR)

  타임리프는 백엔드 서버에서 HTML을 동적으로 렌더링 하는 용도로 사용된다.

- 네츄럴 탬플릿

  타임리프는 **순수 HTML**을 최대한 유지하는 특징이 있다. 타임리프로 작성된 파일은 HTML을 유지하기 때문에 웹 브라우저나 직접 열어도 내용을 확인할  수 있고, 서버에서는 동적으로 렌더링 된 결과물을 확인할 수 있다. 순수 HTML을 유지하면서 뷰 템플릿도 사용할 수 있는 타임리프의 특징을 **네츄럴 탬플릿이라고 한다.**

- 스프링 통합 지원

  타임리프는 스프링과 자연스럽게 통합되고 다양한 기능을 사용할 수 있도록 지원한다.


### 타임리프의 선언

`<html xmlns:th="http://www.thymeleaf.org">`

## 타임리프의 기본 표현식

- 간단한 표현
    - 변수 표현식 : `${ ... }`
    - 선택 변수 표현식 : `*{ ...}`
    - 메시지 표현식 : `#{ ... }`
    - 링크 URL 표현식 : `@{ ... }`
    - 조각 표현식 : `~{ ... }`
- 리터럴
    - [텍스트]() : `'one text', 'Another text', ...`
    - 숫자 :  `0, 34, 3.0, 12.3, ...`
    - 불린 : `true, false`
    - 널 : `null`
    - 리터럴 토큰 : `one, some text, main, ...`
- 문자 연산 :
    - 문자 합치기 : `+`
    - 리터럴 대체 : `|The name is ${name}|`
- 산술 연산 :
    - Binary Operators : `+, -, *, /, %`
    - Unary Opertor : `-`
- 불린 연산 :
    - Binary Operators : `and, or`
    - Unary Operator : `!, not`
- 비교와 동등 :
    - 비교 : `>, <, >=, <= (gt, lt, ge, le)`
    - 동등 연산 : `==, != (eq, ne)`
- 조건 연산 :
    - If-then : `(if) ? (then)`
    - If-then-else : `(if) ? (then) : (else)`
    - Default : `(value) ?: (defaultValue)`
- 특별한 토큰 :
    - No-operation : `_`

## 텍스트

---

기본 기능인 텍스트를 출력하는 기능. HTML의 콘텐츠에 데이터를 출력 시 `th:text`를 사용한다.

- `<span th:text="${data}">`

HTML 태그의 속성이 아닌 HTML 콘텐츠 영역 안에서 직접 테이터를 출력 시 `[[ ... ]]`를 사용한다.

- `<li> 직접 출력 = [[${data}]]</li>`

### Escape

웹브라우저는 <를 HTML 태그의 시작으로 인식한다. 그래서 <를 태그의 시작이 아닌 문자로 표현할 방법이 필요한데, 이를 **HTML 엔티티**라고 한다. 그리고 특수 문자를 HTML 엔티티로 바꾸어주는 것을 **Escape**라고 한다. `th:text`, `[[ ... ]]` 는 기본적으로  Escape를 지원한다.

### UnEscape

이스케이프 기능을 사용하지 않고 싶을 때도 있다. 그때는 `th:utext`, `[( ... )]` 를 사용하면 된다.