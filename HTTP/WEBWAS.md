# WEB/WAS

Date: October 12, 2021

# 웹서버

- HTTP기반으로 동작하고 정적 리소스를 제공한다. 유명한 프로그램으로는 NGINX, APACHE가 있다.

# 웹 애플리케이션 서버(WAS, Web Application Server)

- 웹 서버의 기능에 더해 동적으로 프로그램 코드를 실행해 애플리케이션 단 로직을 수행 가능하다.
- 서블릿, JSP, Spring MVC 등이 그 예
- 유명한 프로그램으로는 톰캣이 있다.
- 자바의 경우 서블릿 컨테이너 기능을 제공하면 WAS
- 애플리케이션 코드를 실행하는데 특화되어있다.

## 웹 시스템의 구성

- WAS - DB만으로만 구성되어 있을 경우 WAS에 문제가 생겼을 때 오류 페이지조차 띄울 수 없다.
- → Client - WEB - WAS - DB로 구성되어 있을 경우
    - 정적 리소스는 WEB에서 처리할 수 있기 때문에 WAS의 부하가 많이 줄어든다.
    - WAS에 문제가 생겨도 WEB서버에서 오류 페이지를 띄울 수 있다.
    - WAS는 애플리케이션 로직만을 전담한다.
    - 정적 리소스가 많으면 WEB서버를, 애플리케이션 리소스가 많으면 WAS서버를 증설할 수 있어 리소스를 효율적으로 관리할 수 있다.

## 서블릿

- 개발자로 하여금 HTTP 메시지에 대해서 해야하는 다양한 작업들을 대신 해준다.
- HttpServletRequest로 HTTP 요청 정보를, HttpServletResponse로 HTTP 응답정보를 편하게 제공할 수 있다.
- HTTP 요청 시 WAS는 Request, Response 객체를 만들어 서블릿 객체를 호출한다.
- 개발자가 Response 객체에 응답 정보를 입력하면 WAS는 해당 객체의 내용으로 HTTP 응답 정보를 생성한다.

## 서블릿 컨테이너

- 톰캣처럼 서블릿을 제공하는 WAS를 서블릿 컨테이너라고 한다.
- 서블릿 객체의 생명주기를 관리한다.
- 서블릿 객체를 싱글톤으로 관리한다. → 공유 변수의 사용을 주의해야한다.
- 멀티 쓰레드를 지원한다.
    - 요청시마다 쓰레드를 생성하는 경우
        - 장점
        - → 동시 요청 처리 가능 및 리소스가 허용할 때 까지 처리 가능
        - 단점
        - → 쓰레드의 생성 비용이 비싸고 제한이 없기 때문에 너무 많은 요청 시 서버가 죽을 수 있다.
    - 쓰레드 풀 → 요청시마다 쓰레드 생성의 단점을 보완한다.
        - 필요 쓰레드를 쓰레드 풀에 보관하고 필요 시 꺼내서 사용한다.
        - → 생성 및 종료 비용이 절약, 응답 시간이 빨라진다.
        - → 쓰레드의 허용량에는 한계가 있으므로 요청한 건은 전부 처리 가능하다.
        - 최대 쓰레드 수를 조정함으로써 WAS를 튜닝할 수 있다.
    - 개발자가 멀티 쓰레드를 신경 쓸 필요가 없다.(WAS가 모두 지원)